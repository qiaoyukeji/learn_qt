## 1. QMainWindow
QMainWindow是一个为用户提供主窗口程序的类，包含一个菜单栏（menu bar）、多个工具栏(tool bars)、多个锚接部件(dock widgets)、一个状态栏(status bar)及一个中心部件(central widget)，是许多应用程序的基础，如文本编辑器，图片编辑器等。

![第二阶段笔记-1635299521579-202110279522.png](https://md.gitnote.cn/第二阶段笔记-1635299521579-202110279522.png)

### 1.1 菜单栏
一个主窗口最多只有一个菜单栏。位于主窗口顶部、主窗口标题栏下面。
```c++
#include "mainwindow.h"
#include "QMenuBar"
MainWindow::MainWindow(QWidget *parent)
    : QMainWindow(parent)
{
    //重置窗口
    resize(600,400);
    //菜单栏创建
    QMenuBar *bar= menuBar();
    //将菜单栏放入窗口中
    setMenuBar(bar);
    //创建菜单(注意头文件)
    QMenu * fileMenu=bar->addMenu("文件");
    QMenu * editMenu=bar->addMenu("编辑");
    //创建菜单项
    fileMenu->addAction("新建");
    //添加分割符
    fileMenu->addSeparator();
    fileMenu->addAction("打开");

}

MainWindow::~MainWindow()
{

}
```

![第二阶段笔记-1635299641064-202110279542.png](https://md.gitnote.cn/第二阶段笔记-1635299641064-202110279542.png)

### 1.2 工具栏
主窗口的工具栏上可以有多个工具条，通常采用一个菜单对应一个工具条的的方式，也可根据需要进行工具条的划分。
```c++
//工具栏 可以有多个
    QToolBar * toolBar = new QToolBar(this);
    //将工具栏放入窗口中(注意头文件)
    addToolBar(Qt::LeftToolBarArea,toolBar);
```
工具条是一个可移动的窗口，它的停靠区域由QToolBar的allowAreas决定，包括：
![第二阶段笔记-1635300224543-2021102710345.png](https://md.gitnote.cn/第二阶段笔记-1635300224543-2021102710345.png)

```c++
//工具栏 可以有多个
    QToolBar * toolBar = new QToolBar(this);
    //将工具栏放入窗口中(注意头文件)
    addToolBar(Qt::LeftToolBarArea,toolBar);

    //后期设置，只允许左右停靠
    toolBar->setAllowedAreas(Qt::LeftToolBarArea | Qt::RightToolBarArea);

    //设置不要浮动到中间
    toolBar->setFloatable(false);
    //设置移动（总开关）
    toolBar->setMovable(false);

    //工具栏中可以设置内容
    toolBar->addAction(newAction);
    //添加分割线
    toolBar->addSeparator();
    toolBar->addAction(openAction);
    //工具栏中添加控件
    QPushButton *btn=new QPushButton("aa",this);
    toolBar->addWidget(btn);
```

![第二阶段笔记-1635301583219-20211027102623.png](https://md.gitnote.cn/第二阶段笔记-1635301583219-20211027102623.png)


### 1.3 状态栏、铆接部件（浮动窗口）、中心部件（核心部件）
状态栏最多有一个

![第二阶段笔记-1635303159049-20211027105239.png](https://md.gitnote.cn/第二阶段笔记-1635303159049-20211027105239.png)

```c++

//状态栏 最多有一个
QStatusBar *stBar = statusBar();
//设置到窗口中
setStatusBar(stBar);
//放标签控件
QLabel *label=new QLabel("提示信息",this);
stBar->addWidget(label);
QLabel *label2=new QLabel("右侧提示信息",this);
stBar->addPermanentWidget(label2);

//铆接部件（浮动窗口）可以多个
QDockWidget * dockWidget = new QDockWidget("浮动",this);
//将铆接部件放入窗口底部
addDockWidget(Qt::BottomDockWidgetArea,dockWidget);
//设置后期停靠区域，只允许上下
dockWidget->setAllowedAreas(Qt::TopDockWidgetArea | Qt::BottomDockWidgetArea);

//设置中心部件(只能有一个)
QTextEdit *edit=new QTextEdit(this);
setCentralWidget(edit);
```

> 技巧：用 set 的只能创建一个，用 add 的可以创建多个

![第二阶段笔记-1635303434481-20211027105714.png](https://md.gitnote.cn/第二阶段笔记-1635303434481-20211027105714.png)


## 2. QtSource
### 2.1 ui 界面拖拽
可以直接在 ui 界面输入导航栏和状态栏，默认输入为英文，可在左下角中将其 text 改为中文。

![第二阶段笔记-1635382708233-2021102885828.png](https://md.gitnote.cn/第二阶段笔记-1635382708233-2021102885828.png)

![第二阶段笔记-1635382131413-2021102884851.png](https://md.gitnote.cn/第二阶段笔记-1635382131413-2021102884851.png)

### 2.2 导航栏状态栏等添加图片资源
1. 首先将图片资源复制到项目文件夹下
2. 右键项目创建新文件，qt->qtresources，
3. 给项目起一个名字，例 res，系统自动生成 res.qrc
4. 先添加前缀，后添加文件
5. 使用：`": + 前缀名 + 文件名"`

```c++
    // ui->actionnew->setIcon(QIcon("C:/Users/Administrator/Desktop/1.jpg"));
    // 使用添加Qt资源 ": + 前缀名 + 文件名"
    ui->actionnew->setIcon(QIcon(":/Image/Luffy.png"));
    ui->actionopen->setIcon(QIcon(":/Image/LuffyQ.png"));
```
## 1. QMainWindow
QMainWindow是一个为用户提供主窗口程序的类，包含一个菜单栏（menu bar）、多个工具栏(tool bars)、多个锚接部件(dock widgets)、一个状态栏(status bar)及一个中心部件(central widget)，是许多应用程序的基础，如文本编辑器，图片编辑器等。

![第二阶段笔记-1635299521579-202110279522.png](https://md.gitnote.cn/第二阶段笔记-1635299521579-202110279522.png)

### 1.1 菜单栏
一个主窗口最多只有一个菜单栏。位于主窗口顶部、主窗口标题栏下面。
```c++
#include "mainwindow.h"
#include "QMenuBar"
MainWindow::MainWindow(QWidget *parent)
    : QMainWindow(parent)
{
    //重置窗口
    resize(600,400);
    //菜单栏创建
    QMenuBar *bar= menuBar();
    //将菜单栏放入窗口中
    setMenuBar(bar);
    //创建菜单(注意头文件)
    QMenu * fileMenu=bar->addMenu("文件");
    QMenu * editMenu=bar->addMenu("编辑");
    //创建菜单项
    fileMenu->addAction("新建");
    //添加分割符
    fileMenu->addSeparator();
    fileMenu->addAction("打开");

}

MainWindow::~MainWindow()
{

}
```

![第二阶段笔记-1635299641064-202110279542.png](https://md.gitnote.cn/第二阶段笔记-1635299641064-202110279542.png)

### 1.2 工具栏
主窗口的工具栏上可以有多个工具条，通常采用一个菜单对应一个工具条的的方式，也可根据需要进行工具条的划分。
```c++
//工具栏 可以有多个
    QToolBar * toolBar = new QToolBar(this);
    //将工具栏放入窗口中(注意头文件)
    addToolBar(Qt::LeftToolBarArea,toolBar);
```
工具条是一个可移动的窗口，它的停靠区域由QToolBar的allowAreas决定，包括：
![第二阶段笔记-1635300224543-2021102710345.png](https://md.gitnote.cn/第二阶段笔记-1635300224543-2021102710345.png)

```c++
//工具栏 可以有多个
    QToolBar * toolBar = new QToolBar(this);
    //将工具栏放入窗口中(注意头文件)
    addToolBar(Qt::LeftToolBarArea,toolBar);

    //后期设置，只允许左右停靠
    toolBar->setAllowedAreas(Qt::LeftToolBarArea | Qt::RightToolBarArea);

    //设置不要浮动到中间
    toolBar->setFloatable(false);
    //设置移动（总开关）
    toolBar->setMovable(false);

    //工具栏中可以设置内容
    toolBar->addAction(newAction);
    //添加分割线
    toolBar->addSeparator();
    toolBar->addAction(openAction);
    //工具栏中添加控件
    QPushButton *btn=new QPushButton("aa",this);
    toolBar->addWidget(btn);
```

![第二阶段笔记-1635301583219-20211027102623.png](https://md.gitnote.cn/第二阶段笔记-1635301583219-20211027102623.png)


### 1.3 状态栏、铆接部件（浮动窗口）、中心部件（核心部件）
状态栏最多有一个

![第二阶段笔记-1635303159049-20211027105239.png](https://md.gitnote.cn/第二阶段笔记-1635303159049-20211027105239.png)

```c++

//状态栏 最多有一个
QStatusBar *stBar = statusBar();
//设置到窗口中
setStatusBar(stBar);
//放标签控件
QLabel *label=new QLabel("提示信息",this);
stBar->addWidget(label);
QLabel *label2=new QLabel("右侧提示信息",this);
stBar->addPermanentWidget(label2);

//铆接部件（浮动窗口）可以多个
QDockWidget * dockWidget = new QDockWidget("浮动",this);
//将铆接部件放入窗口底部
addDockWidget(Qt::BottomDockWidgetArea,dockWidget);
//设置后期停靠区域，只允许上下
dockWidget->setAllowedAreas(Qt::TopDockWidgetArea | Qt::BottomDockWidgetArea);

//设置中心部件(只能有一个)
QTextEdit *edit=new QTextEdit(this);
setCentralWidget(edit);
```

> 技巧：用 set 的只能创建一个，用 add 的可以创建多个

![第二阶段笔记-1635303434481-20211027105714.png](https://md.gitnote.cn/第二阶段笔记-1635303434481-20211027105714.png)


## 2. QtSource
### 2.1 ui 界面拖拽
可以直接在 ui 界面输入导航栏和状态栏，默认输入为英文，可在左下角中将其 text 改为中文。

![第二阶段笔记-1635382708233-2021102885828.png](https://md.gitnote.cn/第二阶段笔记-1635382708233-2021102885828.png)

![第二阶段笔记-1635382131413-2021102884851.png](https://md.gitnote.cn/第二阶段笔记-1635382131413-2021102884851.png)

### 2.2 导航栏状态栏等添加图片资源
1. 首先将图片资源复制到项目文件夹下
2. 右键项目创建新文件，qt->qtresources，
3. 给项目起一个名字，例 res，系统自动生成 res.qrc
4. 先添加前缀，后添加文件
5. 使用：`": + 前缀名 + 文件名"`

```c++
    // ui->actionnew->setIcon(QIcon("C:/Users/Administrator/Desktop/1.jpg"));
    // 使用添加Qt资源 ": + 前缀名 + 文件名"
    ui->actionnew->setIcon(QIcon(":/Image/Luffy.png"));
    ui->actionopen->setIcon(QIcon(":/Image/LuffyQ.png"));
```

## 3. 对话框
对话框分为模态对话框和非模态对话框。
- 模态对话框：不可以对其他窗口进行操作
- 非模态对话框：可以对其他窗口进行操作

```c++
    //点击新建按钮，弹出一个对话框
    connect(ui->actionnew,&QAction::triggered,this,[=](){
        //对话框 分类
        //模态对话框（不可以对其他窗口进行操作） 非模态对话框（可以对其他窗口进行操作）
        // 模态对话框创建  阻塞功能
//        QDialog dlg(this);
//        dlg.resize(200,100);
//        dlg.exec();
        // 非模态对话框创建
        //防止一闪而过，创建到堆区
        QDialog *dlg2=new QDialog(this);
        dlg2->resize(200,100);
        //防止内存泄露
        dlg2->setAttribute(Qt::WA_DeleteOnClose);
        dlg2->show();

    });
```

- 消息对话框：返回值为 standardButton 类型
```c++
        //消息对话框:
        //  错误对话框
//        QMessageBox::critical(this,"critical","错误");
        
        //信息对话框
//        QMessageBox::information(this,"info","信息");
        
        //问题对话框
//        QMessageBox::question(this,"question","问题");
        //参数1：父亲，参数2：标题，参数3：内容，参数4：按键的类型，参数5：默认关联回车的类型
//        QMessageBox::question(this,"question","问题",QMessageBox::Save|QMessageBox::Cancel,QMessageBox::Cancel);
        if(QMessageBox::Save == QMessageBox::question(this,"question","问题",QMessageBox::Save|QMessageBox::Cancel,“QMessageBox::Cancel))
        {
            qDebug()<<"save";
        }else{
            qDebug()<<"Cancel";
        }

```
可以根据对话框的返回值判断用户的输入。
```c++
        //其他标准对话框
        //颜色对话框（注意头文件）
//        QColorDialog::getColor(QColor(255,0,0));
        //文件对话框 参数1：父亲，参数2：标题，参数3：默认打开的地址，参数4：过滤的文件格式
        //返回值是选取的路径
//        QString str= QFileDialog::getOpenFileName(this,"打开文件","C:\\Users\\Administrator\\Desktop","*.txt");
//          qDebug()<<str;

        //字体对话框
        bool flag;
        QFont font= QFontDialog::getFont(&flag,QFont("宋体",36));
        qDebug()<<font;
```

![第二阶段笔记-1635422858835-2021102820745.png](https://md.gitnote.cn/第二阶段笔记-1635422858835-2021102820745.png)

![第二阶段笔记-1635422657793-2021102820418.png](https://md.gitnote.cn/第二阶段笔记-1635422657793-2021102820418.png)
